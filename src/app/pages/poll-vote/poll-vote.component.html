<div *ngIf="poll$ | async as poll; else loading">
    <div *ngIf="poll; else notFound"></div>
  <h1>{{ poll.question }}</h1>

  <!-- Voting Buttons -->
  <div class="options">
    <button *ngFor="let option of poll.options; let i = index" 
            mat-raised-button 
            (click)="vote(poll.options, i)">
      {{ option.text }}
    </button>
  </div>

  <!-- Real-Time Chart -->
  <div class="chart-container">
    <ngx-charts-bar-vertical
      [results]="chartData"
      [xAxis]="true"
      [yAxis]="true"
      [legend]="false"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      xAxisLabel="Options"
      yAxisLabel="Votes">
    </ngx-charts-bar-vertical>
  </div>

  <!-- Shareable Link -->
  <p>Share this link: <code>{{ shareableLink }}</code></p>
</div>
 <!-- If poll is null, show this template instead -->
  <ng-template #notFound>
    <div class="error-container">
      <h2>Poll Not Found</h2>
      <p>Sorry, the poll you are looking for does not exist.</p>
      <!-- Optional: Add a button to go back to the homepage -->
      <a mat-stroked-button routerLink="/">Create a new Poll</a>
    </div>
  </ng-template>

<ng-template #loading>
  <div class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading Poll...</p>
  </div>
</ng-template>